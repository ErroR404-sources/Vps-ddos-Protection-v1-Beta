# ==============================================================================
# For all config settings see: https://man.openbsd.org/sshd_config 
# ==============================================================================

# ------------------------------------------------------------------------------
# Set to newest protocol
# ------------------------------------------------------------------------------
Protocol 2

# ------------------------------------------------------------------------------
# Disable Root
# ------------------------------------------------------------------------------
PermitRootLogin no

# ------------------------------------------------------------------------------
# Disconnect Idle Sessions
# ------------------------------------------------------------------------------
# Number of times to check before disconnecting
ClientAliveCountMax 2
# ------------------------------------------------------------------------------
# Number of seconds of inactivity after which to check client session
ClientAliveInterval 300

# ------------------------------------------------------------------------------
# Whitelist Users
# ------------------------------------------------------------------------------
AllowGroups ssh-user

# ------------------------------------------------------------------------------
# Limit number of login attempts
# ------------------------------------------------------------------------------
MaxAuthTries 3

# ------------------------------------------------------------------------------
# Check if the client connecting maps back to the same hostname and IP address.
# ------------------------------------------------------------------------------
# Only use this when you are sure your internal DNS is properly configured (HOW TO KNOW?)
# ------------------------------------------------------------------------------
# UseDNS yes

# ------------------------------------------------------------------------------
# Disable Password Authentication to force users to use SSH keys
# ------------------------------------------------------------------------------
# This will not work for Chromebook without extra work. It should also only be
# used AFTER the user has logged in with SSH only. HOW TO CHECK THIS?
# ------------------------------------------------------------------------------
# PasswordAuthentication no
# PubkeyAuthentication yes

# ------------------------------------------------------------------------------
# Use Google Authenticator for 2FA
# ------------------------------------------------------------------------------
ChallengeResponseAuthentication yes
UsePAM yes

# ------------------------------------------------------------------------------
# Banners
#
# Banner is shown before login (default is `/etc/issue.net`, path can be changed) 
# PrintMotd (Message of the Day) is shown after login (from `/etc/motd`)
# ------------------------------------------------------------------------------
# Banner none
PrintMotd yes 

# ------------------------------------------------------------------------------
# Change Hostkey Preference
# ------------------------------------------------------------------------------
HostKey /etc/ssh/ssh_host_ed25519_key
HostKey /etc/ssh/ssh_host_rsa_key

# ------------------------------------------------------------------------------
# Restrict supported key exchange, cipher, and MAC algorithms
#
# The first two KexAlgorithms entries should be enough but some servers like
# Github and Heroku (sometimes) require SHA
# ------------------------------------------------------------------------------
# There are some contradicting instructions in online sources regarding these:
#
# KexAlgorithms (?) curve25519-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,
# MACs          (?) hmac-sha2-512,hmac-sha2-256,umac-128@openssh.com
# ------------------------------------------------------------------------------
Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1
MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,umac-128-etm@openssh.com

#EOF
